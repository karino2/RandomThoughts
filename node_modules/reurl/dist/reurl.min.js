var me="-",We=/^xn--/,ze=/[^\0-\x7F]/,Ge=/[\x2E\u3002\uFF0E\uFF61]/g,Ve={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},K=36-1,g=Math.floor,X=String.fromCharCode;function b(e){throw new RangeError(Ve[e])}function Ze(e,t){let n=[],s=e.length;for(;s--;)n[s]=t(e[s]);return n}function ge(e,t){let n=e.split("@"),s="";n.length>1&&(s=n[0]+"@",e=n[1]),e=e.replace(Ge,".");let r=e.split("."),i=Ze(r,t).join(".");return s+i}function we(e){let t=[],n=0,s=e.length;for(;n<s;){let r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<s){let i=e.charCodeAt(n++);(i&64512)==56320?t.push(((r&1023)<<10)+(i&1023)+65536):(t.push(r),n--)}else t.push(r)}return t}var Je=e=>String.fromCodePoint(...e),Qe=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:36},xe=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Fe=function(e,t,n){let s=0;for(e=n?g(e/700):e>>1,e+=g(e/t);e>K*26>>1;s+=36)e=g(e/K);return g(s+(K+1)*e/(e+38))},ve=function(e){let t=[],n=e.length,s=0,r=128,i=72,o=e.lastIndexOf(me);o<0&&(o=0);for(let c=0;c<o;++c)e.charCodeAt(c)>=128&&b("not-basic"),t.push(e.charCodeAt(c));for(let c=o>0?o+1:0;c<n;){let f=s;for(let h=1,l=36;;l+=36){c>=n&&b("invalid-input");let u=Qe(e.charCodeAt(c++));u>=36&&b("invalid-input"),u>g((2147483647-s)/h)&&b("overflow"),s+=u*h;let m=l<=i?1:l>=i+26?26:l-i;if(u<m)break;let C=36-m;h>g(2147483647/C)&&b("overflow"),h*=C}let a=t.length+1;i=Fe(s-f,a,f==0),g(s/a)>2147483647-r&&b("overflow"),r+=g(s/a),s%=a,t.splice(s++,0,r)}return String.fromCodePoint(...t)},Ie=function(e){let t=[];e=we(e);let n=e.length,s=128,r=0,i=72;for(let f of e)f<128&&t.push(X(f));let o=t.length,c=o;for(o&&t.push(me);c<n;){let f=2147483647;for(let h of e)h>=s&&h<f&&(f=h);let a=c+1;f-s>g((2147483647-r)/a)&&b("overflow"),r+=(f-s)*a,s=f;for(let h of e)if(h<s&&++r>2147483647&&b("overflow"),h===s){let l=r;for(let u=36;;u+=36){let m=u<=i?1:u>=i+26?26:u-i;if(l<m)break;let C=l-m,N=36-m;t.push(X(xe(m+C%N,0))),l=g(C/N)}t.push(X(xe(l,0))),i=Fe(r,a,c===o),r=0,++c}++r,++s}return t.join("")},Ke=function(e){return ge(e,function(t){return We.test(t)?ve(t.slice(4).toLowerCase()):t})},Xe=function(e){return ge(e,function(t){return ze.test(t)?"xn--"+Ie(t):t})},Ye={version:"2.1.0",ucs2:{decode:we,encode:Je},decode:ve,encode:Ie,toASCII:Xe,toUnicode:Ke};var $=Ye;var[S,je,et,tt]=[128,192,224,240],[v,st,nt,rt]=[63,31,15,7],Y={encode(e){if(e<128)return[e];if(e<2048){let[t,n]=[e>>6,e&v];return[je|st&t,S|v&n]}else if(e<65536){let[t,n,s]=[e>>12,e>>6,e&v];return[et|nt&t,S|v&n,S|v&s]}else{let[t,n,s,r]=[e>>18,e>>12,e>>6,e&v];return[tt|rt&t,S|v&n,S|v&s,S|v&r]}},decode(e){let t=[],n=0,s=0,r=!1;for(let i=0,o=e.length;i<o;i++){let c=e[i];if([r,n,s]=c>=248?[1,0,0]:c>=240?[n,3,c&7]:c>=224?[n,2,c&15]:c>=192?[n,1,c&31]:c>=128?[!n,n-1,s<<6|c&63]:[n,0,c],r)throw new Error(`Invalid UTF8, at index ${i}`);n===0&&(t[t.length]=s)}if(n)throw new Error("Incomplete UTF8 byte sequence");return t}},A={encode(e,t,{ascii:n=!0,incremental:s=!0}={}){let r="";for(let i of e){let o=i.codePointAt(0);(55296<=o&&o<=56319||56320<=o&&o<=57343)&&(o=65533);let c=n&&(o<32||o>126);if(!s&&o===37||c||j(o)&t)for(let a of Y.encode(o)){let h=a>>4,l=a&15;h=(h<10?48:55)+h,l=(l<10?48:55)+l,r+=String.fromCharCode(37,h,l)}else r+=i}return r},decode(e){return e.replace(ot,it)}},ot=/(%[0-9A-Fa-f]{2})+/g,it=e=>{let t=[];for(let n=0,s=e.length;n<s;n+=3)t[t.length]=parseInt(e.substr(n+1,2),16);return String.fromCodePoint(...Y.decode(t))},j,be,R;{let h=[999,0,871,1022,0,512,0,2],l=[504],u=[384,256,999,256,999,504,384],m=[896,944,896,896,0,865],C=[864,768,864,0];j=d=>d<=31||127<=d&&d<160?-1:32<=d&&d<=39?h[d-32]:d===47?l[d-47]:58<=d&&d<=64?u[d-58]:91<=d&&d<=96?m[d-91]:123<=d&&d<=126?C[d-123]:55296<=d&&d<=57343||64976<=d&&d<=65007||(d>>1&32767)===32767?-1:0;let[N,Pe,Ne,qe]=[256,256,256,64],q={url:512,user:256,pass:Pe,username:N,password:Ne,host:128,dir:64,file:qe,query:4,hash:1},$e={...q,dir:8,file:8},He={...q,dir:32,file:32,query:2},Oe={...q,dir:16,file:16,query:2};R=({minimal:d=!1,special:pe=!1})=>d&&pe?Oe:pe?He:d?$e:q}be=(e,{name:t,minimal:n,special:s})=>j(e)&R({minimal:n,special:s})[t];var Ht=console.log.bind(console),Ae=/[\x00\x09\x0A\x0D\x20#%/:<>?@[\\\]^|]/g;function O(e,t,n=!0){if(e){if(e[0]==="[")e=e.substr(1,e.length-2),e=`[${H.normalise(e)}]`;else if(t&3){let s=n?A.decode(e):e;s=ct(s),s=$.toUnicode(s);let r=T.parse(s);if(r!=null)return T.print(r);if(!s.length||(Ae.lastIndex=0,Ae.test(s)))throw new Error(`Host parser: Invalid domain: ${JSON.stringify(s)}`);return s}}return e}var Ce=/[\u00AD\u034F\u1806\uFEFF\u2060\u180B-\u180D\u200B-\u200D\uFE00-\uFE0F]/g,ye=/[\uFFF9-\uFFFD]/g;function ct(e){ye.lastIndex=Ce.lastIndex=0,e=e.replace(Ce,"").normalize("NFKC").toLowerCase();for(let t of e)if(t=t.codePointAt(0),64976<=t&&t<=65007||t<=1114111&&(t>>1&32767)===32767)throw new Error("Nameprep: Invalid code point");if(ye.test(e))throw new Error("Nameprep: Invalid code point");return e}var ee=/(?:0[xX]([0-9A-Fa-f]*)|(0[0-7]*)|([1-9][0-9]*))([.]?)/y,T={parse(e){ee.lastIndex=0;let t=0,n=0,s,r=!1;for(;s=ee.exec(e);){n++;let i=s[1]!=null?parseInt(s[1]||"0",16):s[2]?parseInt(s[2],8):parseInt(s[3],10);if(ee.lastIndex===e.length){let o=5-n;if(r||i>=256**o)throw new RangeError(`Invalid IPv4 address: <${e}>`);return(t<<8*o)+i}else{if(n===4||!s[4])return null;r=r||i>255,t=(t<<8)+i}}return null},print(e){let t="";for(let n=3;n;n--)t+=(e>>8*n&255)+".";return t+(e&255)},normalise(e){return T.print(T.parse(e))}},lt=/([0-9]+)([.])|([0-9A-Fa-f]+)(:?)|(::)/y,Se=/([0-9]+)([.])|([0-9A-Fa-f]+)(:?)|(:)/y,ft=/([0-9]+)([.])?/y,H={parse(e){let t=[],n=[],s,r=null,i=lt,o=i.lastIndex=0;for(;s=i.exec(e);){if(o=i.lastIndex,s[1]){if(n.push(+s[1]),!s[2])break;i=ft}else if(s[3]){if(t.push(parseInt(s[3],16)),!s[4])break;i=Se}else if(s[5]){if(r==null)r=t.length;else throw new SyntaxError(`Invalid IPv6 address: [${e}]`);i=Se}i.lastIndex=o}if(o!==e.length||n.length&&n.length!==4)throw new SyntaxError(`Invalid IPv6 address: [${e}]`);if(n.length){let[a,h,l,u]=n;t.push(256*a+h,256*l+u)}if(r==null&&t.length!==8)throw new SyntaxError(`Invalid IPv6 address: [${e}]`);let c=[],f=8-t.length;for(let a=0;a<f;a++)c.push(0);return t.splice(r,0,...c),t},print(e){let[t,n]=[0,0],[s,r]=[0,0];for(let o=0,c=e.length;o<c;o++){let f=e[o];for(f===0&&([s,r]=[o,0]);f===0&&o<c;)[o,r,f]=[o+1,r+1,e[o+1]];r>n&&([t,n]=[s,r])}e=e.map(o=>o.toString(16));let i=t>0&&t+n<8?"":t===0&&n===8?"::":":";return n>1&&e.splice(t,n,i),e.join(":")},normalise(e){return H.print(H.parse(e))}};var{setPrototypeOf:re,assign:k}=Object,Ue={scheme:1,auth:2,drive:3,root:4,dir:5,file:6,query:7,hash:8},p={generic:0,web:1,file:2,special:3},ie={http:1,https:1,ws:1,wss:1,ftp:1,file:2},I=({scheme:e},t=p.generic)=>ie[w(e)]||t,at=e=>e.hash!=null&&ke(e)===Ue.hash,w=e=>e&&e.toLowerCase(),F={scheme:1,user:2,pass:2,host:2,port:2,drive:3,root:4,dirs:5,file:6,query:7,hash:8},ke=e=>{for(let t in F)if(e[t]!=null)return F[t];return Ue.hash},ht=(e,t)=>{let n={};for(let s in F)e[s]!=null&&(F[s]<t?n[s]=e[s]:F[s]===t&&s==="dirs"&&(n[s]=e[s].slice(0)));return n},Z=(e,t)=>{let n=ht(e,ke(t));for(let s in F)t[s]!=null&&(s==="dirs"?n.dirs=[...n.dirs||[],...t.dirs]:n[s]=t[s]);return(n.host!=null||n.drive)&&(n.dirs||n.file)&&(n.root="/"),n},E=({scheme:e,host:t,drive:n,root:s})=>{let r=ie[w(e)]||p.generic;return e&&(r&p.file?t!=null&&(n||s):r&p.web?t&&s:t!=null||s)},B=class extends TypeError{constructor(t){super(`Cannot coerce ${M(t)} to a base-URL`)}},ce=e=>(e=k({},e),e.host==null&&(e.host=""),e.drive==null&&(e.root="/"),e),le=e=>{if(e=k({},e),!e.host){let t=e.host,n=e.dirs?e.dirs.slice():[];for(;!t&&n.length;)t=n.shift();if(t||(t=e.file,delete e.file),t){try{k(e,Me(t,p.web))}catch{throw new B(e)}n.length?e.dirs=n:delete e.dirs}else throw new B(e)}return e.root="/",e},fe=e=>{let t=ie[w(e.scheme)]||p.generic;if(t===p.file)return ce(e);if(t===p.web)return le(e);if(e.scheme)return e;throw new B(e)},V=class extends TypeError{constructor(t,n){super(`Cannot resolve <${M(t)}> against <${M(n)}>`)}},J=(e,t)=>{if(e.scheme||t.scheme)return Z(t,e);throw new V(e,t)},ae=(e,t)=>(e.scheme&&w(e.scheme)===w(t.scheme)&&(t=re({scheme:e.scheme},t),e=re({scheme:null},e)),J(e,t)),Q=(e,t)=>{if((e.scheme?I(e):I(t))&p.special)return fe(ae(e,t));if(E(t))return J(e,t);if(t.scheme&&(e.scheme||at(e)))return Z(t,e);throw new V(e,t)},he=(e,t=!0)=>{let n=k({},e),s=w(n.scheme);if(n.scheme=s,n.pass===""&&delete n.pass,!n.pass&&n.user===""&&delete n.user,n.port===""&&delete n.port,!E(e)&&e.dirs)n.dirs=n.dirs.slice();else{let r=[];for(let i of n.dirs||[]){let o=Ee(i,t);o===2?r.pop():o||r.push(i)}if(n.file){let i=Ee(n.file,t);i===2&&r.pop(),i&&delete n.file}r.length?n.dirs=r:delete n.dirs}n.drive&&(n.drive=n.drive[0]+":"),s==="file"&&n.host==="localhost"?n.host="":(e.port===80&&(s==="http"||s==="ws")||e.port===443&&(s==="https"||s==="wss")||e.port===21&&s==="ftp")&&delete n.port;for(let r in F)n[r]==null&&delete n[r];return n},Ee=(e,t=!0)=>e.length<=3&&(e==="."||t&&w(e)==="%2e")?1:e.length<=6&&(e===".."||t&&w(e)===".%2e"||t&&w(e)==="%2e."||t&&w(e)==="%2e%2e")?2:0,L=(e,t={ascii:!0})=>{let n={},s=pt(e);for(let r in F)if(e[r]!=null){let i=e[r];if(r==="dirs"){let o=n.dirs=[];for(let c of i)o.push(A.encode(c,s.dir,t))}else r==="host"?ut(i)?n[r]=i:I(e)&p.special?n[r]=t.ascii?$.toASCII(i):i:n[r]=A.encode(i,s[r],t):n[r]=r in s?A.encode(i,s[r],t):i}return n},dt=R({}),P=e=>{let t={};for(let n in F)e[n]!=null&&(t[n]=n==="dirs"?e[n].map(A.decode):n in dt?A.decode(e[n]):e[n]);return t},ut=e=>e!=null&&e[0]==="["&&e[e.length-1]==="]",pt=(e,t)=>{let n=I(e,t)&p.special,s=n?!1:!E(e);return R({minimal:s,special:n})},M=e=>{let t=!e.drive&&e.host==null,n=e.dirs&&e.dirs[0]==="";return(t&&e.root&&n||!e.root&&n)&&(e=re({dirs:["."].concat(e.dirs)},e)),xt(e)},xt=e=>{let t="",n=e.user!=null;for(let s in F)if(e[s]!=null){let r=e[s];t+=s==="scheme"?r+":":s==="user"?"//"+r:s==="pass"?":"+r:s==="host"?(n?"@":"//")+r:s==="port"?":"+r:s==="drive"?"/"+r:s==="root"?"/":s==="dirs"?r.join("/")+"/":s==="file"?r:s==="query"?"?"+r:s==="hash"?"#"+r:""}return t};function*mt(e=0,t=30){for(;e<=t;)yield 1<<e++}var[W,y,U,te,se,z,ne]=mt(),[gt,wt,Ft,De,_e,Re,G,vt,It,bt,At,Ct,yt]=[...`\r
	 ?#:+-./\\|`].map(e=>e.charCodeAt(0)),Te=e=>65<=e&&e<=90||97<=e&&e<=122;function Be(e,t=p.web){let n={},s=W|y,r=0,i=!1,o=!1,c="",f=0;for(let a=0,h=e.length;a<=h;a++){let l=e.charCodeAt(a);if(l===gt||l===wt||l===Ft||s&W&&l<=De)continue;isNaN(l)&&(c=c.substr(0,f));let u=l===At||t&p.special&&l===Ct;if(u&&s&(W|U)){s=++r===2?te:U;continue}if(s===y&&l===G||s<z&&(u||l===_e)||s<ne&&l===Re||isNaN(l)){s===y&&l===G?(n.scheme=c,t=I(n)):s===U?(u||r)&&(n.root="/"):o?(s&te&&(n.host=""),n.drive=c,delete n.root,u&&(n.root="/")):s&te?(k(n,Me(c,t,!0)),u&&(n.root="/")):s===z?n.query=c:s===ne?n.hash=c:u?(n.dirs=n.dirs||[]).push(c):c&&(n.file=c),s=l===G?U:l===_e?z:l===Re?ne:se,i=o=!1,[c,f]=["",0];continue}s&y&&Te(l)?s=y:s===y&&l!==vt&&l!==It&&l!==bt&&(l<48||57<l)?s=se:s&(W|U)&&(r&&(n.root="/"),s=se),t&p.file&&!n.drive&&!n.dirs&&s<z?(o=i&&(l===yt||s&~y&&l===G),i=!c&&Te(l)):o=!1,c+=e[a],l>De&&(f=c.length)}return n}var St=String.raw;var oe=e=>"(?:"+e+")?",Et=e=>new RegExp("^"+e+"$"),Dt="[:]([0-9]*)",_t="([^:]*)",Rt="[:](.*)",Tt=St`(\[[^\]]*\]|[^\0\t\n\r #/:<>?@[\\\]^|]*)`,Ut=_t+oe(Rt)+"[@]",kt=Et(oe(Ut)+Tt+oe(Dt));function Me(e,t,n=!0){let s,r,i,o,c,f;if(e.length===0)o="";else if(s=kt.exec(e)){if([f,r,i,o,c]=s,c!=null&&c.length&&(c=+c,c>=2**16))throw new Error("ERR_INVALID_PORT")}else throw new Error("ERR_INVALID_AUTH");if((r!=null||c!=null)&&!o)throw new Error;if(t===p.file&&(r!=null||c!=null))throw new Error;o=O(o,t,n);let a={user:r,pass:i,host:o,port:c};for(let h in a)a[h]==null&&delete a[h];return a}var Vt=console.log.bind(console),{setPrototypeOf:de,freeze:Le}=Object,_=class e{constructor(t={},{parser:n="http"}={}){let s=D(t,this,n);return s instanceof e?s:x({},this).set(s)}get href(){return this.toString({ascii:!0})}get percentCoded(){return!1}goto(t){return t=D(t,this,this.scheme),x(Z(this,t),this)}isBase(){return E(this)}forceAsFileUrl(){let t=ce(this);return t===this?this:x(t,this)}forceAsWebUrl(){let t=le(this);return t===this?this:x(t,this)}force(){let t=fe(this);return t===this?this:x(t,this)}genericResolve(t){return t=D(t,this),x(J(this,t),this)}legacyResolve(t){return t=D(t,this),x(ae(this,t),this)}WHATWGResolve(t){return t=D(t,this),x(Q(this,t),this)}resolve(t){return t=D(t,this),x(Q(this,t),this)}normalise(){return x(he(this),this)}normalize(){return x(he(this),this)}percentEncode({ascii:t=!0}={}){let n={ascii:t,incremental:this.percentCoded};return x(L(this,n),{percentCoded:!0})}percentDecode(){return this}toString({ascii:t=!1}={}){let n={ascii:t,incremental:this.percentCoded};return M(L(this,n))}toURI(){if(!E(this))throw new TypeError(`Cannot convert <${this}> to an URI because it has no scheme`);return this.toString({ascii:!0})}toASCII(){return this.toString({ascii:!0})}toJSON(){return this.toString({ascii:!0})}set(t){if("host"in t){let{user:o=null,pass:c=null,port:f=null}=t;t=de({user:o,pass:c,port:f},t)}else"user"in t&&!("pass"in t)&&(t=de({pass:null},t));let{percentCoded:n=this.percentCoded}=t;n!==this.percentCoded&&(t=n?P(t):L(t,{incremental:!1}));let s={},r=[],i=Mt(s,r,this.percentCoded);for(let o in i)o in t?t[o]!=null&&i[o](t[o]):o in this&&(s[o]=o==="dirs"?[...this.dirs]:this[o]);if(r.length)throw new TypeError(`Invalid patch:
	- ${r.join(`
	- `)}
`);if(!s.root)if((s.host!=null||s.drive)&&(s.dirs||s.file)){if(s.root===null)throw new Error("Cannot unset path-root");s.root="/"}else delete s.root;if(r=Lt(s),r.length)throw new TypeError(`	- ${r.join(`
	- `)}
`);return x(s,{percentCoded:this.percentCoded})}},ue=class extends _{get percentCoded(){return!0}percentDecode(){return x(P(this),{percentCoded:!1})}};function x(e,{percentCoded:t=!1}={}){return e.dirs&&Le(e.dirs),Le(de(e,(t?ue:_).prototype))}function D(e,{percentCoded:t=!1}={},n="http"){return typeof e=="string"?(e=Be(e,I({scheme:n})),t?e:P(e)):e&&typeof e=="object"?(e=e instanceof _?e:_.prototype.set.call({},e),e.percentCoded===t?e:t?L(e,{incremental:!1}):P(e)):{}}var Mt=(e,t,n)=>({scheme:s=>{(s=String(s))&&/^[a-zA-Z][a-zA-Z0-9.+-]*$/.test(s)?e.scheme=s:t.push("Invalid scheme string")},user:s=>e.user=String(s),pass:s=>e.pass=String(s),host:s=>e.host=O(String(s),I(e),n),port:s=>{s===""||(s=+s)<2**16?e.port=s:t.push("Invalid port")},drive:s=>{(s=String(s))&&/^[a-zA-Z][|:]?$/.test(s)?e.drive=s.length>1?s:s+":":t.push("Invalid drive string")},root:s=>e.root=s?"/":null,dirs:s=>{if(s&&typeof s=="object"&&Symbol.iterator in s){let r=[];for(let i of s)r[r.length]=String(i);r.length&&(e.dirs=r)}else t.push("Invalid dirs array")},file:s=>{(s=String(s))?e.file=s:t.push("Invalid file string")},query:s=>e.query=String(s),hash:s=>e.hash=String(s)}),Lt=e=>{let t=[],n=!e.scheme&&e.drive||e.scheme&&I(e)===p.file;return(e.host==null||n)&&(e.user!=null||e.pass!=null||e.port!=null)?t.push(n?"A file-URL cannot have credentials or a port":"A host-less URL cannot have credentials or a port"):e.pass!=null&&e.user==null&&t.push("A URL without username cannot have a password"),!n&&e.drive&&t.push("A non-file URL cannot have a drive"),t},Zt="1.0.0-rc.2";export{ue as RawUrl,_ as Url,Zt as version};
