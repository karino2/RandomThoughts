{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/logger.ts","../../src/node/copyCodePlugin.ts"],"sourcesContent":["import type { DefaultLocaleInfo } from '@vuepress/helper'\nimport type { CopyCodePluginLocaleData } from '../shared/index.js'\n\n/**\n * Default locale info for `@vuepress/plugin-copy-code`\n */\nexport const copyCodeLocaleInfo: DefaultLocaleInfo<CopyCodePluginLocaleData> = [\n  [['en', 'en-US'], { copy: 'Copy code', copied: 'Copied' }],\n  [['zh', 'zh-CN', 'zh-Hans'], { copy: '复制代码', copied: '已复制' }],\n  [['zh-TW', 'zh-Hant'], { copy: '複製代碼', copied: '已複製' }],\n  [['de', 'de-DE'], { copy: 'Kopiere den Code.', copied: 'Kopiert' }],\n  [['de-AT'], { copy: 'Kopiere den Code.', copied: 'Kopiert' }],\n  [['vi', 'vi-VN'], { copy: 'Sao chép code', copied: 'Đã sao chép' }],\n  [['uk'], { copy: 'Скопіюйте код', copied: 'Скопійовано' }],\n  [['ru', 'ru-RU'], { copy: 'Скопировать код', copied: 'Скопировано' }],\n  [['br'], { copy: 'Copiar o código', copied: 'Copiado' }],\n  [['pl', 'pl-PL'], { copy: 'Skopiuj kod', copied: 'Skopiowane' }],\n  [['sk', 'sk-SK'], { copy: 'Skopíruj kód', copied: 'Skopírované' }],\n  [['fr', 'fr-FR'], { copy: 'Copier le code', copied: 'Copié' }],\n  [['es', 'es-ES'], { copy: 'Copiar código', copied: 'Copiado' }],\n  [['ja', 'ja-JP'], { copy: 'コードをコピー', copied: 'コピーしました' }],\n  [['tr', 'tr-TR'], { copy: 'Kodu kopyala', copied: 'Kopyalandı' }],\n  [['ko', 'ko-KO'], { copy: '코드 복사', copied: '복사됨' }],\n  [['fi', 'fi-FI'], { copy: 'Kopioi koodi', copied: 'Kopioitu' }],\n  [['hu', 'hu-HU'], { copy: 'Kód másolása', copied: 'Másolva' }],\n  [['id', 'id-ID'], { copy: 'Salin kode', copied: 'Disalin' }],\n  [['nl', 'nl-NL'], { copy: 'Kopieer code', copied: 'Gekopieerd' }],\n]\n","import { Logger } from '@vuepress/helper'\n\nexport const PLUGIN_NAME = '@vuepress/plugin-copy-code'\n\nexport const logger = new Logger(PLUGIN_NAME)\n","import {\n  addViteSsrNoExternal,\n  getFullLocaleConfig,\n  isArray,\n  isString,\n} from '@vuepress/helper'\nimport type { PluginFunction } from 'vuepress/core'\nimport { getDirname, path } from 'vuepress/utils'\nimport { copyCodeLocaleInfo } from './locales.js'\nimport { PLUGIN_NAME, logger } from './logger.js'\nimport type { CopyCodePluginOptions } from './options.js'\n\nconst __dirname = import.meta.dirname || getDirname(import.meta.url)\n\n/**\n * Copy code plugin for VuePress\n *\n * VuePress 复制代码插件\n *\n * @example\n * ```ts\n * import { copyCodePlugin } from '@vuepress/plugin-copy-code'\n *\n * export default {\n *   plugins: [\n *     copyCodePlugin({\n *       // options\n *     }),\n *   ],\n * }\n * ```\n */\nexport const copyCodePlugin =\n  (options: CopyCodePluginOptions = {}): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info('Options:', options)\n\n    return {\n      name: PLUGIN_NAME,\n\n      define: () => ({\n        __CC_SELECTOR__: isArray(options.selector)\n          ? options.selector.join(',')\n          : (options.selector ?? '[vp-content] div[class*=\"language-\"] pre'),\n        __CC_IGNORE_SELECTOR__: Array.isArray(options.ignoreSelector)\n          ? options.ignoreSelector.join(',')\n          : (options.ignoreSelector ?? ''),\n        __CC_INLINE_SELECTOR__: Array.isArray(options.inline)\n          ? options.inline.join(',')\n          : isString(options.inline)\n            ? options.inline\n            : options.inline\n              ? '[vp-content] :not(pre) > code'\n              : '',\n        __CC_LOCALES__: getFullLocaleConfig({\n          app,\n          name: PLUGIN_NAME,\n          default: copyCodeLocaleInfo,\n          config: options.locales,\n        }),\n        __CC_DURATION__: options.duration ?? 2000,\n        __CC_SHOW_IN_MOBILE__: options.showInMobile ?? false,\n      }),\n\n      extendsBundlerOptions: (bundlerOptions: unknown): void => {\n        addViteSsrNoExternal(bundlerOptions, app, '@vuepress/helper')\n      },\n\n      clientConfigFile: path.resolve(__dirname, '../client/config.js'),\n    }\n  }\n"],"names":["copyCodeLocaleInfo","PLUGIN_NAME","logger","Logger","__dirname","getDirname","copyCodePlugin","options","app","isArray","isString","getFullLocaleConfig","bundlerOptions","addViteSsrNoExternal","path"],"mappings":"8KAMO,MAAMA,EAAkE,CAC7E,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,YAAa,OAAQ,QAAS,CAAC,EACzD,CAAC,CAAC,KAAM,QAAS,SAAS,EAAG,CAAE,KAAM,OAAQ,OAAQ,KAAM,CAAC,EAC5D,CAAC,CAAC,QAAS,SAAS,EAAG,CAAE,KAAM,OAAQ,OAAQ,KAAM,CAAC,EACtD,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,oBAAqB,OAAQ,SAAU,CAAC,EAClE,CAAC,CAAC,OAAO,EAAG,CAAE,KAAM,oBAAqB,OAAQ,SAAU,CAAC,EAC5D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,gBAAiB,OAAQ,aAAc,CAAC,EAClE,CAAC,CAAC,IAAI,EAAG,CAAE,KAAM,gBAAiB,OAAQ,aAAc,CAAC,EACzD,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,kBAAmB,OAAQ,aAAc,CAAC,EACpE,CAAC,CAAC,IAAI,EAAG,CAAE,KAAM,kBAAmB,OAAQ,SAAU,CAAC,EACvD,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,cAAe,OAAQ,YAAa,CAAC,EAC/D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,eAAgB,OAAQ,aAAc,CAAC,EACjE,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,iBAAkB,OAAQ,OAAQ,CAAC,EAC7D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,gBAAiB,OAAQ,SAAU,CAAC,EAC9D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,UAAW,OAAQ,SAAU,CAAC,EACxD,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,eAAgB,OAAQ,YAAa,CAAC,EAChE,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,QAAS,OAAQ,KAAM,CAAC,EAClD,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,eAAgB,OAAQ,UAAW,CAAC,EAC9D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,eAAgB,OAAQ,SAAU,CAAC,EAC7D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,aAAc,OAAQ,SAAU,CAAC,EAC3D,CAAC,CAAC,KAAM,OAAO,EAAG,CAAE,KAAM,eAAgB,OAAQ,YAAa,CAAC,CAClE,ECzBaC,EAAc,6BAEdC,EAAS,IAAIC,EAAOF,CAAW,ECQtCG,EAAY,YAAY,SAAWC,EAAW,YAAY,GAAG,EAoBtDC,EACX,CAACC,EAAiC,CAAA,IACjCC,IACKA,EAAI,IAAI,SAASN,EAAO,KAAK,WAAYK,CAAO,EAE7C,CACL,KAAMN,EAEN,OAAQ,KAAO,CACb,gBAAiBQ,EAAQF,EAAQ,QAAQ,EACrCA,EAAQ,SAAS,KAAK,GAAG,EACxBA,EAAQ,UAAY,2CACzB,uBAAwB,MAAM,QAAQA,EAAQ,cAAc,EACxDA,EAAQ,eAAe,KAAK,GAAG,EAC9BA,EAAQ,gBAAkB,GAC/B,uBAAwB,MAAM,QAAQA,EAAQ,MAAM,EAChDA,EAAQ,OAAO,KAAK,GAAG,EACvBG,EAASH,EAAQ,MAAM,EACrBA,EAAQ,OACRA,EAAQ,OACN,gCACA,GACR,eAAgBI,EAAoB,CAClC,IAAAH,EACA,KAAMP,EACN,QAASD,EACT,OAAQO,EAAQ,OAClB,CAAC,EACD,gBAAiBA,EAAQ,UAAY,IACrC,sBAAuBA,EAAQ,cAAgB,EACjD,GAEA,sBAAwBK,GAAkC,CACxDC,EAAqBD,EAAgBJ,EAAK,kBAAkB,CAC9D,EAEA,iBAAkBM,EAAK,QAAQV,EAAW,qBAAqB,CACjE"}