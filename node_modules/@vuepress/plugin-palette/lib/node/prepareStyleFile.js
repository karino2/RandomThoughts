import { fs } from 'vuepress/utils';
/**
 * Prepare style file
 *
 * 准备样式文件
 *
 * @param app - VuePress app instance
 * @param options - prepare options
 * @returns file path of generated style file
 *
 * @example
 * ```ts
 * const stylePath = await prepareStyleFile(app, {
 *   userStyleFile: '.vuepress/styles/index.scss',
 *   tempStyleFile: 'styles/index.scss',
 *   importCode: (filePath) => `@forward 'file:///${filePath}';\n`
 * })
 * ```
 */
export const prepareStyleFile = async (app, { userStyleFile, tempStyleFile, importCode, }) => {
    const userStyle = app.dir.source(userStyleFile);
    let content = '';
    if (await fs.pathExists(userStyle)) {
        content += importCode(userStyle);
    }
    return app.writeTemp(tempStyleFile, content);
};
