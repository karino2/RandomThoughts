機内書き物。

Android用のシェルみたいな何かが欲しいと思って、[[Starlark]]で作ろうか、と思ったが、
[[Starlark]]はクラスなどが無い。
小さなコアがあっていろいろその上に作っていく、というモノとは用途が違う。

luaとかはそういうものと思うが、小粋なシンタックスというのとは随分違うものだ。まぁlua詳しくないからそう思うだけかもしれないが。

[[EmbeddedLang]]に以前いろいろ見たのがあるが、これはC++。Kotlinで使いたい、と思う奴が欲しいな。

そもそも、そういう用途のスクリプト言語というものが無い気がする。
ここで言う「そういう用途」とはなんだろう？

- 実装が小さい
- 小粋なシンタックス
- コアの機能が小さく、拡張していく最低限のものだけを提供している

[[Starlark]]はかなり近い。だが拡張していくベース言語というものではない。

言語内DSLを作っていけるような基盤が欲しいんだよな。

でも[[Starlark]]は改めて学習する必要が無く、広く使われている言語に近いというメリットはあるんだよなぁ。
うーむ、自分で作ってもこれらのメリットは得られない気はする。

まぁ作るのが現実的かどうかはおいといて、何が欲しいのかをもう少し考えてみよう。

まず、Androidで使いやすいembed言語が欲しい。だからAndroidのランタイムが使えるので独自にGCとかはしなくていい。
実装は小さくて取り回しが良いのが良い。スピードはいらない。普通にテキストをパースして実行するので良い。

その気になれば簡単に実装出来るようなのがいい。とりあえずgolangとkotlinで簡単に実装出来る何か。

Python shではいろいろな付加機能をmethod chainや名前付き引数で提供していて、ああいうのを使いたい。
オプショナルな事をいろいろ簡単に書けて欲しいんだよな。

うーむ、考えていると何が欲しいのか良く分からなくなってきた。

まず当面の目的は、[[Starlark]]で使い方を工夫すればいいような気もしてきたな。たぶんある機能でうまい事考える事は出来る気がする。

そしてそういう具体例無しで欲しい言語を考えるのは、たぶんうまくいかない。
うまく行かないのだけれど、なんとなくモヤモヤしたものを書き出してスッキリしておくのはやっておきたい気もするので、以下にはぼんやりとした考えを書き出していきたい。

関数定義が短く出来る言語がいい。ラムダも短く書ける言語がいい。

オブジェクトリテラルがJavaScriptみたいに簡単に書ける言語がいい。

パイプ演算子は欲しい。

デフォルトは短く呼べるが、オプショナルな要素を追加出来るようになっていて欲しい。

ユーザーに定義させたものを操作しやすい言語がいい。
例えば定義した関数の引数を調べて、その中身に応じて挙動を変えたい。

パースも実行も簡単な言語がいい。

例えば[[FSharp]]には、パイプラインの途中で`$_`を使ったプロパティアクセスがあると関数になる、みたいな機能があるが、ああいう感じの言語が欲しい気がするなぁ。

型は無くて関数適用はF#的で、中括弧でブロック、中括弧の中に`$0`とかあるとラムダ式になる、とかでどうだろう？