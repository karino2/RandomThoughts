[TeFWiki](TeFWiki.md)およびその一機能として[サブWIki](サブWIki.md)というのを考えて実装して使ってきた。
仕様を考える時に考えていた事はいろいろとブログやWikiに書いてきたが、
それからしばらく経って結構書いたものも蓄積されてきたので、
ここらで振り返って評価してみたいと思う。

## ここまで書いてきたものの量はなかなかのもの

仕様を考える時にいろいろ考えても、この手のものは結局はどれだけ有益なコンテンツを生み出したか、が全てだろう。
そういう点で自分が書いてきたものを見てみたい。

ここまで、以下のようなサブWikiをそれなりの量書いている。

- 公開してない個人情報などに関わるメモのWiki
- [RandomThoughts](https://karino2.github.io/RandomThoughts/Home) 雑多なメモ
- [Biochemistry 705x](https://karino2.github.io/Biochemistry705x/Home)
- [Molecular Biology 728x](https://karino2.github.io/MolecularBiology728x/Home)
- [CellBiology706x](https://karino2.github.io/SubWiki/CellBiology706x/Home)
- [JetpackCompose](https://karino2.github.io/SubWiki/JetpackCompose/Home)

公開してない個人情報のWikiもかなりうまく機能していて、これまでどこに置くのか困っていたものたちもいい感じに集約されてきている。
また、公開しているものとしてはRandomThoughtsと生物関連は非常に豊富な内容になっている。
これはうまく行った証と言って良いだろう。

生物関連の講義のノートを取るのは現時点でもかなりの負担で、これ以上負担を増やしたら続かない自信がある。
これはそう思って作ったシステムだったが、やはり思った通りだった、というところだ（後述）。

とにかく、生み出したコンテンツの量としては成功したと言って良いだろう。
生物のノートに関してはブログに書いていた頃に比べて遥かに有益になっていて、
見直す事もかなり多いのでWikiで書いて良かったと思っている。
むしろ最初に教科書を読んでた時と700x Introの２つがブログのノートになっていてあまり見直しに使えないのが結構困ってもいる。

RandomThoughtsに関してもブログにするほどのことでも無いと思ったものをちまちま書いていったら意外と膨らんだ、
という事は多いし、自分の作ったものをまとめる場としても、また書いた事を深めていく場としてもブログとは違う形態としてうまく機能していると思う。

書かれたコンテンツとしては割とうまく言っている、と言って良いんじゃないか。

## 一つのWikiに全て書くか分けるべきか（分けるべきと思う根拠）

サブWikiを評価するにあたり、そもそも一つのWikiではダメなのか、というのが一番最初に考える事だろう。
これはダメだったと思う。

まず分けるデメリットとしてはサブWiki間で共通するものの置き場とか、サブWiki間で関連する概念のネットワークが弱くなる、というのがある。
実際生物の講義では共通する話題も多く、リガンドとかGPCRとかは繰り返し出てくるし、assayの類も同じ話が何度も出てきている。
こうしたものは本来は共通した場所で書いていって新しい追加の内容が出てくる都度追記していく方が望ましいだろう。

でも実際にしばらくノートを取ってみて思った結論としては、そういうのは思うほど多くは無かった。
確かにあるのだが、別にグローバルなURLのリンクで実用上は特に困っていない。
両方にまたがって編集をしていくのは不便なはずだが、過去に書いた事はそれほど変更したいとは思わなかった。
やはり講義のノートは一度講義が終われば比較的stableだ、という仮説は正しかったと言えそう。

また、当初から考えていた通り、講義のノートを取るのは凄く大変だった。
グローバルなWikiでいちいち一意になるように意味のある名前をつけていくのは現実的じゃない。
そのコースの動画の名前だとかUnitのタイトルだとかから適当に名前をつけてとりあえず書き始めて、
もっと適切な名前があとから分かってきたらそこで名前つけて移す、
でも別段そのままというのもしょっちゅうある、というのが現実だ。
やはり名前づけに工夫が必要なものは講義のノートには向かない。

ノートを取る大変さについては以下にも書いた。＞[講義のノートを取るのは難しいよなぁ - なーんだ、ただの水たまりじゃないか](https://karino2.github.io/2021/08/27/lecture_note_difficulty.html)

復習のしやすさという点でも概念ごとにページが分かれているのはダメそうだ。
やはり講義の時系列の内容にある程度沿って、
1ページあたりの情報量がそれなりの分量になるようになっていないと見直しが出来ない。
assayごとにページが分かれていたらきっとあっという間に全体を把握出来なくなっただろう。
やはり講義ごとに独立していて、その講義のページの一覧がすぐに見れる状態でないとノートとしていまいちだ。

講義のノートごとに分かれているメリットは多く、統合されているメリットは持ったより無さそう。

## ローカルのテキストファイルであるメリットは大きい（主に検索の速度で）

最近は割とAdvancedなコースに入ってきたので、過去のノートをgrepして見直す事も増えた。
どのコースでやった内容か覚えてないので横断的に検索しては関連するところを見直して思い出す、というのを頻繁にやっている。
この時の検索のキーワードは良く覚えていないので試行錯誤を頻繁に行う必要があり、
正規表現を必要とする事もある。

この辺はgrepで一瞬かつ横断的に検索出来て、何度もトライアンドエラーをしつつ引っかかったものを見たり戻ったりを繰り返せるのは重要だ。
トライアンドエラーのしやすさという点ではローカルのテキストファイルのメリットは大きい。
何よりgrepは早い。早さは正義。
あー、なんだったかなぁ、と思いながら何度も検索する時には特にそう思う。

引っかかった結果を見るのに、[mdvcat](mdvcat.md)やmdcatなどをいろいろ使い分けられるのもちょっと嬉しい事がある。
さっと見たい時はmdcat、GUIでじくり見たい時はmdvcat、もっとブラウズまでしたい時はTeFWikiで該当ページまで行く、みたいに。

## グローバルなURLが振られている意義は大きい

サブWikiはgit-wikiで公開しているので、公開した結果にはURLがつく。
普段編集しているのはローカルのマークダウンファイル群なのだが、
公開しているサブWikiは全て公開されるので基本的にはURLがつく。
やはりURLは良い。

ブログやSNSに貼れるし、サブWikiをまたいだリンクにも出来る。
プライベートなノートとパブリックなノートを管理出来てパブリックなノートにはURLがつく、というのは大切だよなぁ、と思った。
また、システムを乗り換える時にもURLが乗り換え先でどうなるか想像出来るというのもいいよな。
無意味なidになられると、システム乗り換えでリンクの情報が失われてしまいがち。
サブWikiは日本語だとURLエンコードされているから見るだけでは分からないが、
URLエンコードはデコード出来るしデコードすれば通常のWikiNameになっているので乗り換え先のどのページなのかもちゃんと推測出来る。

その代償としてファイル名として有効なページタイトルしか作れないけれど、このトレードオフは適切だと思う。

## サブWikiにツリー構造の意義は全く無い

現状は子Wikiが作れるというシステムになっているが、
子Wikiであるメリットは一切無かった。孫を作る事も無いし。
それよりはフォルダごとに独立したWikiが作れれば十分だったように思う。

親から子へリンクが貼れるのは多少嬉しいがわかりにくさ、独自仕様を入れる割にはいい事が無い。

フォルダごとに複数の独立したWikiが持てればそれでよかったのでは無いか、と思っている。
サブWikiはそんなに頻繁には作らないし、どうせ公開方法のあたりである程度作業が必要になるので、
WikiNameのように手軽に作れる事自体がそれほど意義のある事では無い。

なんとなくツリーにしてしまったが必要なのは「サブ」なWikiじゃなくて独立した別々のWikiだった。

独自仕様にしたのは間違いで、フォルダごとに別々のWikiが開ければそれで良かったように思う。
Android版のアプリのUIを書くのがかったるくてこうなったのだが、そこは頑張っても良かった。

## インクリメンタルに開発が進められた

良かった事として、ちょっとずつ公開周辺を改善していけた、というのがある。
最終的には複数のサブWikiを一つのレポジトリで公開出来るように整理したが（[Home - サブWiki公開用Wiki](https://karino2.github.io/SubWiki/Home)に一覧が出るようになっている）、
最初は一つ一つ手作業で公開しては改善していった。

検索が必要になった時に検索機能を実装せずに[mdvcat](mdvcat.md)というGUIのマークダウンビュワーを作ったとか、
テーブルの編集が必要になった時もプラグインを作らずに[mdvtbl](mdvtbl.md)という外部コマンドを作ったというあたりも非常にうまくいったところに思う。
実際最近の生物関連のノートに豊富にテーブルが含まれるようになっているのは、
自分の考えの正しさを証明出来ているのでは無いか。

最小限のコストでノートを書き始めてだんだんと整備しつつ拡張を続けられているのは、
フォルダごとの独立したWikiとプレーンテキストのマークダウンにファイル名のWikiNameというデータの単純さの勝利に思う。

## 講義のノートの特徴は大きい

サブWikiがうまく機能したのは、生物の講義のノートだったから、という風に思う。



----
以下書きかけ




そしてWikiが分かれている事は非常にうまく機能している。

Jetpack Composeは大した内容じゃないのでRandomThoughtsでも良いかもしれないが、他は割と分かれている事に意義がある。



## その他

ここまで割と

ノートを取るという点で、講義ごとに独立した小さなWikiをデプロイ単位にするというのはほぼ間違いない形と思う。
そして独立したWikiはフォルダで閉じているべきで、それはサブWikiの仕様そのままであるので、
これは割と完成されている仕様と思う。

だが、TeFWikiはサブWiki機能以外はほとんど完成されている。
一方でサブWiki機能周辺はUI的にもまだまだ足りない機能がある。
こういう終わらない開発は切り口が間違っているんじゃないか、
というようなブログ記事を昨日書いた。（[これ以上足すものが無いな、と思えるのが良いツールの切り口](https://karino2.github.io/2022/03/11/good_tool_is_nothing_to_add.html)）

サブWiki機能は独自拡張なのだから、こういうのは外に出せないものか。
ついでにTeFWiki自体もっと分解出来ないものか。

ブラウズは楽であって欲しいし、新規のページの作成も簡単であって欲しい。
だから[Unix的GUIツール](Unix的GUIツール.md)にするのは出来ないと思う。
だが、編集は外出しでも良いのでは無いか。

フォルダを指定するとその範囲をブラウズし、Editを押すと外部エディタをキックするような何かにすれば、もっとミニマムに出来るのでは無いか。
これならElectronでは無くPhotinoでもいいかもしれない。

コマンドラインからフォルダを指定して使えるWiki的ブラウザとEditや新規のWikiNameをたどるとエディタがキックされるのは、
かなり汎用的でこれ以上削れない仕様にも思う。

そして複数のTeFWikiをブラウズしたり切り替えたりするのは外部のキックするアプリに任せられる気がする。
こうすればサブWiki関連のUIを変えたいという問題も自由に外で扱えるし、複数のサブWikiを同時に表示して見比べたい、
みたいな用途も簡単にサポート出来るんじゃないか。

一方で分解すると第三者が使いにくいよなぁ、とは思う。Electronのアプリをとりあえず入れれば後は普通に使えるという手軽さが失われるのはいまちだよなぁ。